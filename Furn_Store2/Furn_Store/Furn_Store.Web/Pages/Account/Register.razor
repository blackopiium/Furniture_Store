@using Furn_Store.Web.ViewModels;
@inject Furn_Store.Web.Services.AccountService accountService
@inject NavigationManager NavigationManager
@page "/register"
<h3>Register</h3>
<input type="text" @bind="register.userName" placeholder="username" />
<br />
<input type="text" @bind="register.email" placeholder="email" />
<br />
<input type="password" @bind="register.password" placeholder="password" />
<br />
<input type="password" @bind="register.passwordConfirm" placeholder="confirm password" />
<br />
<input type="button" value="Submit" @onclick="SaveUser" />
@text
@code {
    RegisterViewModel register { get; set; } = new RegisterViewModel();
  @* public string Username { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string PasswordConfirm { get; set; }*@
    public string text;
    public string Error;
    private async Task SaveUser()
    {
        Error = "";
        var result = await accountService.CreateUserAsync(register);
        if (result.IsSuccessStatusCode)
            NavigationManager.NavigateTo("/");
        else
        {
            Error = await result.Content.ReadAsStringAsync();
        }

    } 
}

